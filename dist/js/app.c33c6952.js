(function(){"use strict";var e={3320:function(e,t,i){var a={};i.r(a),i.d(a,{addBaseDir:function(){return ve},delBaseDir:function(){return ye},getBaseDir:function(){return we},getCurrentTask:function(){return me},getVersion:function(){return ge},reloadAll:function(){return fe},syncDirRecursively:function(){return pe}});var o={};i.r(o),i.d(o,{get:function(){return De},getByVirtualPath:function(){return be},getPage:function(){return Le},searchByName:function(){return Se}});var n={};i.r(n),i.d(n,{listDirs:function(){return ke},searchDirs:function(){return Ie}});var s=i(9242),r=i(3396);const d={id:"app-outer"},l={id:"app-inner"};function u(e,t,i,a,o,n){const s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",l,[(0,r.Wm)(s)])])}var h={name:"App"},c=i(89);const g=(0,c.Z)(h,[["render",u]]);var f=g,p=i(9005),m=(i(4415),i(2483)),v=i(4870),w=i(7139),y=i(2748);const L={class:"card"},D={style:{position:"absolute",bottom:"8px"}},S={class:"info",style:{"margin-top":"10px"}},b={class:"info"},k={class:"info"},I={class:"info"};function C(e,t,i,a,o,n){const s=(0,r.up)("el-image"),d=(0,r.up)("el-popover");return(0,r.wg)(),(0,r.iD)("div",L,[(0,r._)("div",{onClick:t[0]||(t[0]=(...e)=>n.handleClick&&n.handleClick(...e))},[(0,r.Wm)(s,{src:n.coverURL,class:"image"},null,8,["src"])]),(0,r.Wm)(d,{placement:"bottom",offset:-35,title:"",width:256,trigger:"hover",content:i.video.Name,"show-arrow":!1,"popper-style":"background-color: #21252b; border: 0px; color: white"},{reference:(0,r.w5)((()=>[(0,r._)("div",{class:"title",ref:"title"},(0,w.zw)(i.video.Name),513)])),_:1},8,["content"]),(0,r._)("div",D,[(0,r._)("div",S," 时长："+(0,w.zw)(n.formatDuration.hour)+":"+(0,w.zw)(n.formatDuration.minute)+":"+(0,w.zw)(n.formatDuration.second),1),(0,r._)("div",b," 尺寸："+(0,w.zw)(i.video.Width)+"×"+(0,w.zw)(i.video.Height),1),(0,r._)("div",k," 大小："+(0,w.zw)(n.formatSize),1),(0,r._)("div",I," 观看："+(0,w.zw)(n.formatTime),1)])])}var _=i(6943);const x={local:"http://localhost:8081/v1",prod:location.origin+"/v1"}["prod"],P=_.Z.create({baseURL:x,timeout:4e3});var z=P;function T(e){let t=Math.floor(e/3600),i=Math.floor(e%3600/60),a=Math.floor(e-3600*t-60*i);return a=a<10?`0${a}`:String(a),i=i<10?`0${i}`:String(i),t=String(t),{hour:t,minute:i,second:a}}function W(e){e=e/1024/1024;let t="MB";return e>=1024&&(e/=1024,t="GB"),e.toFixed(2)+t}function M(e){return e/=1024,e.toFixed(2)+"KB/s"}function E(e,t){if(void 0===t&&(t="Root"),!e||"/"===e)return[t];let i=e.split("/");return i[0]=t,i}function V(){document.documentElement.scrollTop=0}var U=i(6704),$={name:"VideoCard",props:{video:{default:()=>({BitRate:0,CodeType:"undefined",Duration:0,FrameRate:0,Height:0,ID:"",LastViewTime:0,Location:"",Name:"undefined",Size:0,UpdateTime:0,VideoSuffix:"undefined",Width:0})}},data(){return{}},mounted(){},methods:{handleClick(){let e=this.$router.resolve({path:"/video/"+this.video.ID,query:{}});window.open(e.href,"_blank")}},computed:{coverURL(){if(!this.video.ID||!this.video.ID.length)return"";let e=U.DS.encode(this.video.Name),t=U.DS.encode(this.video.Location);return`${x}/common/cover?name=${e}&location=${t}`},formatSize(){return W(this.video.Size)},formatDuration(){return T(this.video.Duration)},formatTime(){let e="",t=new Date(this.video.LastViewTime),i=new Date(Date.now());return 0===this.video.LastViewTime?" - ":i.getTime()-this.video.LastViewTime<=6e4?"刚刚":(e=t.getDay()===i.getDay()?"今天 ":t.getDay()+1===i.getDay()?"昨天 ":t.toLocaleDateString()+" ",e+=t.toLocaleTimeString(),e.substring(0,e.length-3))}}};const R=(0,c.Z)($,[["render",C],["__scopeId","data-v-427773ce"]]);var A=R;const B={class:"search-icon"},N=["value","placeholder","maxlength"],j={name:"SearchInput",props:{modelValue:{type:String},placeholder:{type:String},maxlength:{type:Number,default:()=>100},disabled:{type:Boolean,default:!1}},data(){return{}},methods:{handleOuterClick(){this.$refs.input.focus()},handleInputKeyDown(e){if(!this.disabled)return"Enter"!==e.key||this.handleSearch(),!0},handleSearch(){this.disabled||this.$emit("search")},handleInput(e){if(this.disabled)return void(e.target.value=this.modelValue);let t=e.target.value;this.$emit("update:modelValue",t),t||this.$emit("clear")},inputFocusIn(){this.$refs.outer.style.outline="2px solid #00aeec"},inputFocusOut(){try{this.$refs.outer.style.outline=""}catch{}},handleClear(){this.disabled||(this.$emit("update:modelValue",""),this.$emit("clear"),this.$refs.input.focus())}}};var O=Object.assign(j,{setup(e){return(t,i)=>{const a=(0,r.up)("el-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"card",ref:"outer",onClick:i[6]||(i[6]=(...e)=>t.handleOuterClick&&t.handleOuterClick(...e))},[(0,r._)("div",B,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.olm))])),_:1})]),(0,r._)("input",{type:"text",ref:"input",onFocus:i[0]||(i[0]=(...e)=>t.inputFocusIn&&t.inputFocusIn(...e)),onFocusout:i[1]||(i[1]=(...e)=>t.inputFocusOut&&t.inputFocusOut(...e)),onInput:i[2]||(i[2]=(...e)=>t.handleInput&&t.handleInput(...e)),value:e.modelValue,placeholder:e.placeholder,maxlength:e.maxlength,onKeydown:i[3]||(i[3]=(...e)=>t.handleInputKeyDown&&t.handleInputKeyDown(...e))},null,40,N),e.modelValue?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"search-button",onClick:i[4]||(i[4]=(...e)=>t.handleSearch&&t.handleSearch(...e))}," 搜索 ")):(0,r.kq)("",!0),e.modelValue?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"clear",onClick:i[5]||(i[5]=(...e)=>t.handleClear&&t.handleClear(...e))},[(0,r.Wm)(a,{style:{}},{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.x8P))])),_:1})])):(0,r.kq)("",!0)],512)}}});const F=(0,c.Z)(O,[["__scopeId","data-v-aa19f56e"]]);var q=F;const G={class:"title"};function H(e,t,i,a,o,n){const d=(0,r.up)("el-image"),l=(0,r.up)("el-popover");return(0,r.wg)(),(0,r.iD)("div",{class:"card",ref:"outer",onMouseenter:t[0]||(t[0]=(...e)=>n.handleMouseEnter&&n.handleMouseEnter(...e)),onMouseleave:t[1]||(t[1]=(...e)=>n.handleMouseLeave&&n.handleMouseLeave(...e))},[i.dir.NumFiles>0||i.dir.NumSubDirs>0?((0,r.wg)(),(0,r.j4)(d,{key:0,src:"dir.svg",class:"dir",onClick:n.handleClick},null,8,["onClick"])):((0,r.wg)(),(0,r.j4)(d,{key:1,src:"dir-empty.svg",class:"dir",onClick:n.handleClick},null,8,["onClick"])),(0,r.wy)((0,r._)("div",{class:"dot-info-file"},(0,w.zw)(i.dir.NumFiles>99?"99+":i.dir.NumFiles),513),[[s.F8,0!==i.dir.NumFiles||0!==i.dir.NumSubDirs]]),(0,r.wy)((0,r._)("div",{class:"dot-info-loc"},(0,w.zw)(i.dir.NumSubDirs>99?"99+":i.dir.NumSubDirs),513),[[s.F8,0!==i.dir.NumSubDirs]]),(0,r.Wm)(l,{placement:"bottom",offset:0,title:"",width:128,trigger:"hover",content:i.dir.Name,"show-arrow":!1,"popper-style":"background-color: #202124; border: 0px; color: white; text-align: center"},{reference:(0,r.w5)((()=>[(0,r._)("div",G,(0,w.zw)(i.dir.Name),1)])),_:1},8,["content"])],544)}var Z={name:"DirCard",props:{dir:{default:{ID:"0",Name:"undefined",NumFiles:0,NumSubDirs:0,ParentID:"0",Location:"undefined"}}},methods:{handleMouseEnter(){this.$refs.outer.style.backgroundColor="#373c44"},handleMouseLeave(){this.$refs.outer.style.backgroundColor=""},handleClick(){this.$emit("enter",this.dir.Location)},dotInfoTopLoc(){return 0===this.dir.NumFiles?"20px":"50px"}}};const K=(0,c.Z)(Z,[["render",H],["__scopeId","data-v-9f73e3b6"]]);var Y=K;const X={class:"card"},J=["onMouseenter","onMouseleave","onClick"],Q={style:{padding:"30px","font-size":"16px",color:"#ffffff"}},ee={style:{padding:"20px","font-size":"16px",color:"#ffffff"}},te={style:{padding:"20px","font-size":"16px",color:"#ffffff"}},ie={style:{padding:"20px","font-size":"16px",color:"#ffffff"}},ae={style:{padding:"20px","font-size":"16px",color:"#ffffff"}},oe={name:"LocationBreadcrumb",props:{pathElems:{default:["Root"]},disabled:{type:Boolean,default:!1}},data(){return{label:this.pathElems[this.pathElems.length-1],borderRadius:3,actives:{}}},methods:{handleBreadClick(e){if(!this.disabled){switch(e){case-1:e=this.pathElems.length-2;break;case-2:e=0;break;case-3:return void this.$emit("refresh");case-4:return void this.$emit("reload")}this.pathElems.length-1<=e||this.$emit("switch",e)}},handleMouseEnter(e,t){this.pathElems.length-1<=t||(this.actives[""+t]=!0)},handleMouseLeave(e,t){this.actives[""+t]=!1},btnUniqueStyle(e){let t={borderRadius:"0px",cursor:"pointer"};return 1===this.pathElems.length?(t.borderRadius=`${this.borderRadius}px`,t.cursor="default",t.backgroundColor="#4690f7"):0===e?t.borderRadius="?px 0px 0px ?px".replaceAll("?",this.borderRadius):e===this.pathElems.length-1&&(t.cursor="default",t.borderRadius="0px ?px ?px 0px".replaceAll("?",this.borderRadius),t.backgroundColor="#4690f7"),t}},computed:{inRoot(){return 1===this.pathElems.length}},watch:{"pathElems.length":{handler(){this.actives["-1"]=!1,this.actives["-2"]=!1},immediate:!0}},mounted(){console.log(this.inRoot)}};var ne=Object.assign(oe,{setup(e){return(t,i)=>{const a=(0,r.up)("el-icon"),o=(0,r.up)("el-tooltip");return(0,r.wg)(),(0,r.iD)("div",X,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.pathElems,((e,i)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,w.C_)(["btn",{active:t.actives[`${i}`]}]),key:i,onMouseenter:e=>t.handleMouseEnter(e,i),onMouseleave:e=>t.handleMouseLeave(e,i),ref_for:!0,ref:`btn${i}`,onClick:e=>t.handleBreadClick(i),style:(0,w.j5)(t.btnUniqueStyle(i))},[(0,r._)("span",Q,(0,w.zw)(e),1)],46,J)))),128)),e.pathElems.length>1?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,w.C_)([{active:t.actives["-1"]},"btn operator btn-left"]),onMouseenter:i[0]||(i[0]=e=>t.handleMouseEnter(e,-1)),onMouseleave:i[1]||(i[1]=e=>t.handleMouseLeave(e,-1)),onClick:i[2]||(i[2]=e=>t.handleBreadClick(-1)),ref:"btn-1"},[(0,r._)("span",ee,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.eJh))])),_:1})])],34)):(0,r.kq)("",!0),e.pathElems.length>1?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,w.C_)(["btn operator btn-mid",{active:t.actives["-2"]}]),onMouseenter:i[3]||(i[3]=e=>t.handleMouseEnter(e,-2)),onMouseleave:i[4]||(i[4]=e=>t.handleMouseLeave(e,-2)),onClick:i[5]||(i[5]=e=>t.handleBreadClick(-2)),ref:"btn-2"},[(0,r._)("span",te,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.TXp))])),_:1})])],34)):(0,r.kq)("",!0),(0,r._)("div",{class:(0,w.C_)(["btn operator",{active:t.actives["-3"],"btn-left":t.inRoot}]),onMouseenter:i[6]||(i[6]=e=>t.handleMouseEnter(e,-3)),onMouseleave:i[7]||(i[7]=e=>t.handleMouseLeave(e,-3)),onClick:i[8]||(i[8]=e=>t.handleBreadClick(-3)),ref:"btn-3"},[(0,r.Wm)(o,{effect:"dark",content:"刷新",placement:"bottom",offset:"-5"},{default:(0,r.w5)((()=>[(0,r._)("span",ie,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.Ufu))])),_:1})])])),_:1})],34),(0,r._)("div",{class:(0,w.C_)(["btn operator btn-right",{active:t.actives["-4"]}]),onMouseenter:i[9]||(i[9]=e=>t.handleMouseEnter(e,-4)),onMouseleave:i[10]||(i[10]=e=>t.handleMouseLeave(e,-4)),onClick:i[11]||(i[11]=e=>t.handleBreadClick(-4)),ref:"btn-4"},[(0,r.Wm)(o,{effect:"dark",content:"同步",placement:"bottom",offset:"-5"},{default:(0,r.w5)((()=>[(0,r._)("span",ae,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.hYj))])),_:1})])])),_:1})],34)])}}});const se=(0,c.Z)(ne,[["__scopeId","data-v-7aa75a5c"]]);var re=se;const de={class:"card"},le={style:{"font-size":"16px"}},ue={class:"info"},he={class:"highlight"};function ce(e,t,i,a,o,n){const s=(0,r.up)("el-progress");return(0,r.wg)(),(0,r.iD)("div",de,[(0,r.Wm)(s,{"text-inside":!0,"stroke-width":28,percentage:n.percent,color:n.customColorMethod,class:"progress"},{default:(0,r.w5)((()=>[(0,r._)("span",le,(0,w.zw)(o.status.Message)+" "+(0,w.zw)(` (${o.status.CurrentStep}/${o.status.TotalSteps})`)+"    ",1)])),_:1},8,["percentage","color"]),(0,r._)("div",ue,[(0,r._)("span",he,(0,w.zw)(i.name),1),(0,r.Uk)(" "+(0,w.zw)(o.title),1)])])}function ge(){return z({method:"GET",url:"/common/version"})}function fe(){return z({method:"GET",url:"/common/reload/all"})}function pe({path:e}){return e||(e=""),e=U.DS.encode(e),z({method:"GET",url:`/common/syncdir/recursively?path=${e}`})}function me({clear:e}){return e||(e="yes"),z({method:"GET",url:`/common/task?clear=${e}`})}function ve({localPath:e}){if(!e)throw new Error("参数为空");return e=U.DS.encode(e),z({method:"GET",url:`/common/add/base?path=${e}`})}function we(){return z({method:"GET",url:"/common/get/base"})}function ye({localPath:e}){if(!e)throw new Error("参数为空");return e=U.DS.encode(e),z({method:"GET",url:`/common/del/base?path=${e}`})}function Le({page:e}){return void 0===e&&(e=0),z({method:"GET",url:`/videos?page=${e}`})}function De({id:e}){return void 0===e&&(e=0),z({method:"GET",url:`/video?id=${e}`})}function Se({key:e,page:t}){return void 0===t&&(t=0),e=U.DS.encode(e),z({method:"GET",url:`/video/search?key=${e}&page=${t}`})}function be({path:e,page:t}){return void 0===t&&(t=0),e=U.DS.encode(e),z({method:"GET",url:`/dir/videos?path=${e}&page=${t}`})}function ke({page:e,path:t}){return void 0===e&&(e=0),void 0===t&&(t=""),t=U.DS.encode(t),z({method:"GET",url:`/dir/list?path=${t}&page=${e}`})}function Ie({page:e,key:t}){return void 0===e&&(e=0),void 0===t&&(t=""),t=U.DS.encode(t),z({method:"GET",url:`/dir/search?key=${t}&page=${e}`})}var Ce={common:a,video:o,dir:n};const _e=8,xe=18,Pe=0;var ze={name:"StatusCard",props:{name:{type:String,default:"undefined"}},data(){return{status:{},defaultStatus:{Name:"undefined",Message:"undefined",Duration:0,TotalSteps:0,CurrentStep:0,StartTime:0,Returns:void 0,Running:!1,ErrorStr:""},title:"正在执行"}},mounted(){this.polling()},methods:{customColorMethod(e){return e<30?"#909399":e<60?"#e6a23c":e<60?"#67c23a":"#4690f7"},async polling(){let e=await this.GetStatus();e?setTimeout(this.polling,500):this.$emit("stop",this.status)},async GetStatus(){if(this.name.length){try{let e=await Ce.common.getCurrentTask({clear:"yes"});if(e.data.code!==Pe)throw new Error(e.data.message);return this.status=e.data.data,!!this.status.Running||(this.title="执行结束",!1)}catch(e){this.status=this.defaultStatus,this.status.Message=e.message}return!1}}},computed:{percent(){if(!this.status.TotalSteps)return 15;let e=this.status.TotalSteps,t=this.status.CurrentStep;return Math.round(t/e*.85*100)+15}}};const Te=(0,c.Z)(ze,[["render",ce],["__scopeId","data-v-615c1352"]]);var We=Te;function Me(e,t,i,a,o,n){const s=(0,r.up)("el-tooltip");return(0,r.wg)(),(0,r.iD)("div",{class:(0,w.C_)(["card",{actives:o.mouseOver,"mouse-down":o.mouseDown}]),onMousedown:t[0]||(t[0]=(...e)=>n.handleMouseDown&&n.handleMouseDown(...e)),onMouseup:t[1]||(t[1]=(...e)=>n.handleMouseUp&&n.handleMouseUp(...e)),onMouseenter:t[2]||(t[2]=(...e)=>n.handleMouseEnter&&n.handleMouseEnter(...e)),onMouseleave:t[3]||(t[3]=(...e)=>n.handleMouseLeave&&n.handleMouseLeave(...e))},[(0,r.Wm)(s,{content:i.tip,placement:"left",disabled:""===i.tip},{default:(0,r.w5)((()=>[(0,r._)("span",{class:"font-span",style:(0,w.j5)(`font-size: ${i.fontSize}px`)},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],4)])),_:3},8,["content","disabled"])],34)}var Ee={name:"DarkButton",props:{name:{default:"按钮",type:String},disabled:{type:Boolean,default:!1},tip:{type:String,default:""},fontSize:{type:Number,default:14}},data(){return{mouseOver:!1,mouseDown:!1}},methods:{handleMouseEnter(){this.mouseOver=!0},handleMouseLeave(){this.mouseOver=!1,this.mouseDown=!1},handleMouseDown(){this.mouseDown=!0},handleMouseUp(){this.mouseDown=!1}}};const Ve=(0,c.Z)(Ee,[["render",Me],["__scopeId","data-v-9326c904"]]);var Ue=Ve,$e=i(2655),Re=i(7178),Ae=i(6666);const Be=e=>((0,r.dD)("data-v-0f24f643"),e=e(),(0,r.Cn)(),e),Ne={key:0},je={class:"background",style:{"padding-top":"15px","padding-bottom":"15px"}},Oe=Be((()=>(0,r._)("div",{style:{width:"100%",height:"15px"}},null,-1))),Fe={class:"background top-background"},qe=Be((()=>(0,r._)("div",{class:"title"}," 媒体库 ",-1))),Ge=Be((()=>(0,r._)("div",{style:{width:"100%",height:"15px"}},null,-1))),He=Be((()=>(0,r._)("hr",{style:{"margin-left":"15px","margin-right":"15px"},size:"1",color:"#656c71"},null,-1))),Ze=Be((()=>(0,r._)("div",{style:{width:"100%",height:"30px"}},null,-1))),Ke={key:1,class:"search-data-show",style:{"margin-bottom":"2px"}},Ye={class:"highlight"},Xe={class:"highlight"},Je=Be((()=>(0,r._)("div",{style:{width:"100%",height:"25px"}},null,-1))),Qe={class:"dir-outer","element-loading-background":"rgba(122, 122, 122, 0.8)"},et={key:0,class:"dir-empty"},tt=Be((()=>(0,r._)("div",{style:{width:"100%",height:"20px"}},null,-1))),it=Be((()=>(0,r._)("div",{style:{width:"100%",height:"15px"}},null,-1))),at={class:"background other-background"},ot=Be((()=>(0,r._)("div",{class:"title"}," 视频列表 ",-1))),nt=Be((()=>(0,r._)("div",{style:{width:"100%",height:"15px"}},null,-1))),st=Be((()=>(0,r._)("hr",{style:{"margin-left":"15px","margin-right":"15px"},size:"1",color:"#656c71"},null,-1))),rt=Be((()=>(0,r._)("div",{style:{width:"100%",height:"30px"}},null,-1))),dt={key:0,class:"search-data-show"},lt={class:"highlight"},ut={class:"highlight"},ht={key:1,class:"search-data-show"},ct={class:"highlight"},gt={key:2,class:"search-data-show"},ft={class:"highlight"},pt={class:"highlight"},mt=Be((()=>(0,r._)("div",{style:{width:"100%",height:"40px"}},null,-1))),vt={key:3,style:{display:"flex","justify-content":"center"}},wt={key:4,class:"video-empty"},yt={class:"aside-btns"},Lt={name:"MainPage",data(){return{videos:[],videoListPageInfo:{total:0,pageSize:_e,curPage:1},inputInfo:{videoListContent:"",dirListContent:""},dirInfo:{path:"/",dirs:[]},dirListPageInfo:{total:0,pageSize:xe,curPage:1},videoListStateArgs:{code:-1,searchContent:"",prevCode:-1},dirListStateArgs:{code:-1,searchContent:"",prevCode:-1,prevPath:"/"},wheelInCD:!1,loadingInfo:{dir:!0,video:!0},taskInfo:{name:""},dialogInfo:{dialogTableVisible:!1,dialogTableAddContent:"",baseDirs:[{name:"Videos",path:"D:/Videos"}]}}},beforeMount(){this.switchVideoListState(0),this.switchDirListState(0)},mounted(){this.getCurrentTask()},methods:{handleSyncBaseDir(e,t){$e.T.confirm("在变更的文件量较大的情况下同步磁盘信息需要消耗一定时间，确认继续吗？","Warning",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{this.syncDirRecursively("/"+t.name),this.dialogInfo.dialogTableVisible=!1}))},handleAddBaseDir(){!this.dialogInfo.dialogTableAddContent||this.dialogInfo.dialogTableAddContent.length<=0?Re.z8.warning("路径不能为空！"):Ce.common.addBaseDir({localPath:this.dialogInfo.dialogTableAddContent}).then((e=>{if(e.data.code!==Pe)throw new Error(e.data.message);this.dialogInfo.baseDirs=e.data.data,Re.z8.success("添加成功，请手动进行同步")})).catch((e=>{Re.z8.error(e.message)}))},handleDelBaseDir(e,t){console.log(e,t);let i=t.path;$e.T.confirm(`确认删除'${i}'媒体库吗？`,"Warning",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{Ce.common.delBaseDir({localPath:i}).then((e=>{if(e.data.code!==Pe)throw new Error(e.data.message);this.dialogInfo.baseDirs=e.data.data,Re.z8.success("删除成功"),this.handleBreadClick(0,!0)})).catch((e=>{Re.z8.error(e.message)}))}))},handleEditDir(){Ce.common.getBaseDir().then((e=>{if(e.data.code!==Pe)throw new Error(e.data.message);this.dialogInfo.baseDirs=e.data.data})).catch((e=>{Re.z8.error(e.message)})),this.dialogInfo.dialogTableVisible=!0},handleToTop(){V()},handleStatusStop(e){if(console.log(e),e.ErrorStr.length)(0,Ae.bM)({type:"error",title:`执行${e.Name}失败`,message:e.ErrorStr,duration:1e4});else if(e.Returns){let t=` 新增库：${e.Returns.numDirAdded}<br/>\n                 删除库：${e.Returns.numDirRemoved}<br/>\n                 新增视频：${e.Returns.numVideoAdded}<br/>\n                 删除视频：${e.Returns.numVideoRemoved}<br/>\n                 耗时：${(e.Duration/1e3).toFixed(2)}s\n               `;(0,Ae.bM)({type:"success",title:`执行${e.Name}成功`,message:t,duration:1e4,dangerouslyUseHTMLString:!0})}this.taskInfo.name.startsWith("SyncDir")&&this.handleBreadRefresh(),setTimeout((()=>{this.taskInfo.name=""}),3e3)},handleReloadAll(){$e.T.confirm("重新加载所有磁盘数据需要消耗一定时间，确认继续吗？","Warning",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{Ce.common.reloadAll().then((e=>{if(e.data.code!==Pe)throw new Error(e.data.message);Re.z8.success("程序启动成功..."),this.taskInfo.name="ReloadAll"})).catch((e=>{Re.z8.error(e.message)}))}))},manualNextDirListPage(){let e=Math.floor(this.dirListPageInfo.total/(this.dirListPageInfo.pageSize+1))+1;this.dirListPageInfo.curPage>=e||(this.dirListPageInfo.curPage++,this.handleDirListPageChange(this.dirListPageInfo.curPage))},manualPrevDirListPage(){this.dirListPageInfo.curPage<=1||(this.dirListPageInfo.curPage--,this.handleDirListPageChange(this.dirListPageInfo.curPage))},handleDirMouseEnter(){this.showDirListPagi&&(this.wheelInCD=!1,window.onmousewheel=document.onmousewheel=e=>{this.wheelInCD||(this.wheelInCD=!0,e.wheelDelta<0?this.manualNextDirListPage():e.wheelDelta>0&&this.manualPrevDirListPage(),setTimeout((()=>{this.wheelInCD=!1}),200))},document.body.style.overflow="hidden",document.addEventListener("touchmove",(e=>{e.preventDefault()})))},handleDirMouseLeave(){window.onmousewheel=document.onmousewheel=null,document.body.style.overflow="",document.removeEventListener("touchmove",(e=>{e.preventDefault()}))},handleDirClick(e){this.dirListPageInfo.curPage=1,this.dirInfo.path=e,1===this.dirListStateArgs.code&&(this.dirListStateArgs.prevPath=e),this.switchDirListState(0,!0)},handleBreadRefresh(){this.listDirs(0,this.dirInfo.path),this.pathElems.length<=1?this.switchVideoListState(0,!0):this.switchVideoListState(2,!0)},handleBreadReload(){$e.T.confirm("在变更的文件量较大的情况下同步磁盘信息需要消耗一定时间，确认继续吗？","Warning",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{this.syncDirRecursively(this.dirInfo.path)}))},handleBreadClick(e,t){if(this.pathElems.length-1===e&&!t)return;let i=this.pathElems.slice(1,e+1),a="/"+i.join("/");this.dirInfo.path=a,this.listDirs(0,a),0===e?this.switchVideoListState(0):this.switchVideoListState(2,!0)},handleDirListPageChange(e){switch(this.dirListStateArgs.code){case 0:this.listDirs(e-1,this.dirInfo.path);break;case 1:this.getDirListSearch(this.dirListStateArgs.searchContent,e-1);break;case 2:break}},handleVideoListInputClear(){switch(this.videoListStateArgs.code){case 0:break;case 1:this.switchVideoListState(this.videoListStateArgs.prevCode);break;case 2:break}},handleVideoListSearch(){1===this.videoListStateArgs.code&&this.videoListStateArgs.searchContent===this.inputInfo.videoListContent||this.inputInfo.videoListContent&&this.switchVideoListState(1,!0)},handleVideoListPageChange(e){switch(this.videoListStateArgs.code){case 0:this.getVideoListPage(e-1);break;case 1:this.getVideoListSearch(this.videoListStateArgs.searchContent,e-1);break;case 2:this.getVideoListByPathPage(this.dirInfo.path,e-1);break}},handleDirListSearch(){1===this.dirListStateArgs.code&&this.dirListStateArgs.searchContent===this.inputInfo.dirListContent||this.inputInfo.dirListContent&&this.switchDirListState(1,!0)},handleDirListInputClear(){switch(this.dirListStateArgs.code){case 0:break;case 1:this.switchDirListState(this.dirListStateArgs.prevCode);break}},async getVideoListPage(e){this.loadingInfo.video=!0;try{let t=await Ce.video.getPage({page:e});if(t.data.code!==Pe)throw new Error(t.data.message);this.videos=t.data.data.videos,this.videoListPageInfo.total=t.data.data.count,this.loadingInfo.video=!0}catch(t){Re.z8.error(t.message)}this.loadingInfo.video=!1},async getVideoListSearch(e,t){this.loadingInfo.video=!0,void 0===t&&(t=0);try{let i=await Ce.video.searchByName({key:e,page:t});if(i.data.code!==Pe)throw new Error(i.data.message);this.videos=i.data.data.videos,this.videoListPageInfo.total=i.data.data.count}catch(i){Re.z8.error(i.message)}this.loadingInfo.video=!1},async listDirs(e,t){this.loadingInfo.dir=!0;try{let i=await Ce.dir.listDirs({page:e,path:t});if(i.data.code!==Pe)throw new Error(i.data.message);this.dirInfo.dirs=i.data.data.dirs,this.dirListPageInfo.total=i.data.data.count,this.loadingInfo.dir=!0}catch(i){Re.z8.error(i.message)}this.loadingInfo.dir=!1},async getVideoListByPathPage(e,t){this.loadingInfo.video=!0;try{let i=await Ce.video.getByVirtualPath({page:t,path:e});if(i.data.code!==Pe)throw new Error(i.data.message);this.videos=i.data.data.videos,this.videoListPageInfo.total=i.data.data.count}catch(i){Re.z8.error(i.message)}this.loadingInfo.video=!1},async getDirListSearch(e,t){this.loadingInfo.dir=!0;try{let i=await Ce.dir.searchDirs({key:e,page:t});if(i.data.code!==Pe)throw new Error(i.data.message);this.dirInfo.dirs=i.data.data.dirs,this.dirListPageInfo.total=i.data.data.count}catch(i){Re.z8.error(i.message)}this.loadingInfo.dir=!1},async getCurrentTask(){try{let e=await Ce.common.getCurrentTask({clear:"no"});if(e.data.code!==Pe)throw new Error(e.data.message);this.taskInfo.name=e.data.data.Name}catch(e){Re.z8.error(e.message)}},async syncDirRecursively(e){try{if(!e)throw new Error("path 未指定");let t=await Ce.common.syncDirRecursively({path:e});if(t.data.code!==Pe)throw new Error(t.data.message);this.taskInfo.name="SyncDirRecursively"}catch(t){Re.z8.error(t.message)}},switchVideoListState(e,t){if(e===this.videoListStateArgs.code&&!t)return!1;switch(e!==this.videoListStateArgs.code&&(this.videoListStateArgs.prevCode=this.videoListStateArgs.code,t=!1),this.videoListStateArgs.code=e,e){case 0:this.getVideoListPage(),this.videoListPageInfo.curPage=1;break;case 1:this.videoListStateArgs.searchContent=this.inputInfo.videoListContent,this.getVideoListSearch(this.videoListStateArgs.searchContent);break;case 2:this.getVideoListByPathPage(this.dirInfo.path,0);break;default:return!1}return!0},switchDirListState(e,t){if(e===this.dirListStateArgs.code&&!t)return!1;switch(e!==this.dirListStateArgs.code&&(this.dirListStateArgs.prevCode=this.dirListStateArgs.code,t=!1),this.dirListStateArgs.code=e,e){case 0:t||(this.dirInfo.path=this.dirListStateArgs.prevPath),this.listDirs(0,this.dirInfo.path),"/"!==this.dirInfo.path&&this.switchVideoListState(2,!0);break;case 1:this.dirListStateArgs.searchContent=this.inputInfo.dirListContent,t||(this.dirListStateArgs.prevPath=this.dirInfo.path),this.getDirListSearch(this.dirListStateArgs.searchContent);break;default:return!1}return!0}},computed:{showVideoListPagi(){return this.videoListPageInfo.total>this.videoListPageInfo.pageSize},showVideoListEmpty(){return!this.videos||!this.videos.length},pathElems(){return E(this.dirInfo.path)},showDirListPagi(){return this.dirListPageInfo.total>this.dirListPageInfo.pageSize},showDirListEmpty(){return!this.dirInfo.dirs||!this.dirInfo.dirs.length},DirInnerHeight(){return this.dirListPageInfo.total<=this.dirListPageInfo.pageSize/2?"190px":"326px"}},watch:{"dirListPageInfo.total":{handler(e,t){0===e&&this.handleDirMouseLeave()},immediate:!0}}};var Dt=Object.assign(Lt,{setup(e){return(0,s.sj)((e=>({"5b0e0ca6":e.DirInnerHeight}))),(e,t)=>{const i=(0,r.up)("el-affix"),a=(0,r.up)("el-col"),o=(0,r.up)("el-row"),n=(0,r.up)("el-image"),d=(0,r.up)("el-pagination"),l=(0,r.up)("el-icon"),u=(0,r.up)("el-table-column"),h=(0,r.up)("el-button"),c=(0,r.up)("el-table"),g=(0,r.up)("el-input"),f=(0,r.up)("el-dialog"),p=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.taskInfo.name.length?((0,r.wg)(),(0,r.iD)("div",Ne,[(0,r.Wm)(i,{offset:0},{default:(0,r.w5)((()=>[(0,r._)("div",je,[e.taskInfo.name.length?((0,r.wg)(),(0,r.j4)((0,v.SU)(We),{key:0,name:e.taskInfo.name,onStop:e.handleStatusStop},null,8,["name","onStop"])):(0,r.kq)("",!0)])])),_:1})])):(0,r.kq)("",!0),Oe,(0,r._)("div",Fe,[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:18},{default:(0,r.w5)((()=>[qe])),_:1}),(0,r.Wm)(a,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(q),{style:{"margin-left":"10px"},modelValue:e.inputInfo.dirListContent,"onUpdate:modelValue":t[0]||(t[0]=t=>e.inputInfo.dirListContent=t),placeholder:"搜索库",onSearch:e.handleDirListSearch,onClear:e.handleDirListInputClear,disabled:e.loadingInfo.dir},null,8,["modelValue","onSearch","onClear","disabled"])])),_:1})])),_:1}),Ge,He,Ze,0===e.dirListStateArgs.code?((0,r.wg)(),(0,r.j4)((0,v.SU)(re),{key:0,"path-elems":e.pathElems,onSwitch:e.handleBreadClick,onRefresh:e.handleBreadRefresh,onReload:e.handleBreadReload,style:{"margin-left":"20px","font-size":"18px","margin-top":"-15px"},disabled:e.loadingInfo.dir},null,8,["path-elems","onSwitch","onRefresh","onReload","disabled"])):(0,r.kq)("",!0),1===e.dirListStateArgs.code?((0,r.wg)(),(0,r.iD)("div",Ke,[(0,r.Uk)(" 为您搜索到 "),(0,r._)("span",Ye,(0,w.zw)(e.dirListPageInfo.total),1),(0,r.Uk)(' 个" '),(0,r._)("span",Xe,(0,w.zw)(e.dirListStateArgs.searchContent),1),(0,r.Uk)(' "相关库 ')])):(0,r.kq)("",!0),Je,(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Qe,[(0,r._)("div",{class:"dir-inner",onMouseenter:t[1]||(t[1]=(...t)=>e.handleDirMouseEnter&&e.handleDirMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.handleDirMouseLeave&&e.handleDirMouseLeave(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dirInfo.dirs,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.ID,class:"dir-item"},[(0,r.Wm)((0,v.SU)(Y),{dir:t,style:{},onEnter:e.handleDirClick},null,8,["dir","onEnter"])])))),128))],32),e.dirListPageInfo.total?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",et,[(0,r.Wm)(n,{src:"defaults/no-dirs.svg",style:{height:"120px"}})]))])),[[p,e.loadingInfo.dir]]),tt,(0,r.wy)((0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{style:{display:"flex","justify-content":"center"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{background:"",small:"",layout:"prev, pager, next, jumper",total:e.dirListPageInfo.total,"onUpdate:total":t[3]||(t[3]=t=>e.dirListPageInfo.total=t),"page-size":e.dirListPageInfo.pageSize,"current-page":e.dirListPageInfo.curPage,"onUpdate:current-page":t[4]||(t[4]=t=>e.dirListPageInfo.curPage=t),onCurrentChange:e.handleDirListPageChange},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1})])),_:1},512),[[s.F8,e.showDirListPagi]])]),it,(0,r._)("div",at,[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:18},{default:(0,r.w5)((()=>[ot])),_:1}),(0,r.Wm)(a,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(q),{style:{"margin-left":"10px"},modelValue:e.inputInfo.videoListContent,"onUpdate:modelValue":t[5]||(t[5]=t=>e.inputInfo.videoListContent=t),placeholder:"搜索视频",onSearch:e.handleVideoListSearch,onClear:e.handleVideoListInputClear,disabled:e.loadingInfo.video},null,8,["modelValue","onSearch","onClear","disabled"])])),_:1})])),_:1}),nt,st,rt,1===e.videoListStateArgs.code?((0,r.wg)(),(0,r.iD)("div",dt,[(0,r.Uk)(" 以下为您找到 "),(0,r._)("span",lt,(0,w.zw)(e.videoListPageInfo.total),1),(0,r.Uk)(' 条" '),(0,r._)("span",ut,(0,w.zw)(e.videoListStateArgs.searchContent),1),(0,r.Uk)(' "的相关视频 ')])):(0,r.kq)("",!0),0===e.videoListStateArgs.code?((0,r.wg)(),(0,r.iD)("div",ht,[(0,r.Uk)(" 在磁盘上找到 "),(0,r._)("span",ct,(0,w.zw)(e.videoListPageInfo.total),1),(0,r.Uk)(" 条的视频 ")])):(0,r.kq)("",!0),2===e.videoListStateArgs.code?((0,r.wg)(),(0,r.iD)("div",gt,[(0,r.Uk)(' 在" '),(0,r._)("span",ft,(0,w.zw)(e.dirInfo.path),1),(0,r.Uk)(' "中有 '),(0,r._)("span",pt,(0,w.zw)(e.videoListPageInfo.total),1),(0,r.Uk)(" 条视频 ")])):(0,r.kq)("",!0),(0,r.wy)(((0,r.wg)(),(0,r.j4)(o,{class:"video-cards-outer","element-loading-background":"rgba(122, 122, 122, 0.8)"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.videos,(e=>((0,r.wg)(),(0,r.j4)(a,{span:6,key:e.ID,style:{"margin-bottom":"40px",display:"grid","justify-content":"center"}},{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(A),{video:e},null,8,["video"])])),_:2},1024)))),128))])),_:1})),[[p,e.loadingInfo.video]]),mt,e.showVideoListPagi?((0,r.wg)(),(0,r.iD)("div",vt,[(0,r.Wm)(d,{background:"",small:"",layout:"prev, pager, next, jumper",total:e.videoListPageInfo.total,"onUpdate:total":t[6]||(t[6]=t=>e.videoListPageInfo.total=t),"page-size":e.videoListPageInfo.pageSize,"current-page":e.videoListPageInfo.curPage,"onUpdate:current-page":t[7]||(t[7]=t=>e.videoListPageInfo.curPage=t),onCurrentChange:e.handleVideoListPageChange},null,8,["total","page-size","current-page","onCurrentChange"])])):(0,r.kq)("",!0),e.showVideoListEmpty?((0,r.wg)(),(0,r.iD)("div",wt,[(0,r.Wm)(n,{src:"defaults/no-videos.svg",style:{height:"180px"}})])):(0,r.kq)("",!0)]),(0,r.Wm)(i,{position:"bottom",offset:400},{default:(0,r.w5)((()=>[(0,r._)("div",yt,[(0,r.Wm)((0,v.SU)(Ue),{tip:"编辑媒体库",onClick:e.handleEditDir,style:{"margin-top":"3px"},"font-size":20},{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.FDh))])),_:1})])),_:1},8,["onClick"]),(0,r.Wm)((0,v.SU)(Ue),{tip:"重载媒体库",style:{"margin-top":"8px"},onClick:e.handleReloadAll},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{src:"恢复_重置.svg",style:{width:"18px",height:"18px"}})])),_:1},8,["onClick"]),(0,r.Wm)((0,v.SU)(Ue),{onClick:e.handleToTop,style:{"margin-top":"8px","margin-bottom":"3px"},tip:"回到顶部","font-size":16},{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.S9J))])),_:1})])),_:1},8,["onClick"])])])),_:1}),(0,r.Wm)(f,{modelValue:e.dialogInfo.dialogTableVisible,"onUpdate:modelValue":t[9]||(t[9]=t=>e.dialogInfo.dialogTableVisible=t),title:"编辑媒体库",width:"650"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{data:e.dialogInfo.baseDirs,border:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{property:"name",label:"名称",width:"150"}),(0,r.Wm)(u,{property:"path",label:"路径",width:"300"}),(0,r.Wm)(u,{label:"",fixed:"right",align:"center"},{default:(0,r.w5)((t=>[(0,r.Wm)(h,{size:"small",type:"danger",onClick:i=>e.handleDelBaseDir(t.$index,t.row)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1}),(0,r.Wm)(u,{label:"",fixed:"right",align:"center"},{default:(0,r.w5)((t=>[(0,r.Wm)(h,{size:"small",type:"primary",onClick:i=>e.handleSyncBaseDir(t.$index,t.row)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 同步 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,r.Wm)(o,{style:{"margin-top":"30px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:20,style:{}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 输入路径  "),(0,r.Wm)(g,{style:{width:"400px"},modelValue:e.dialogInfo.dialogTableAddContent,"onUpdate:modelValue":t[8]||(t[8]=t=>e.dialogInfo.dialogTableAddContent=t)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(a,{span:4,style:{display:"flex","justify-content":"center","margin-left":"-5px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{onClick:e.handleAddBaseDir},{default:(0,r.w5)((()=>[(0,r.Uk)("添加")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});const St=(0,c.Z)(Dt,[["__scopeId","data-v-0f24f643"]]);var bt=St;i(7658);const kt={class:"container"},It={class:"info",style:{"margin-top":"10px"}},Ct={class:"info"},_t={class:"info"},xt={class:"info"},Pt={class:"info"},zt={class:"info"},Tt={class:"info"},Wt={class:"info"},Mt={class:"info"};function Et(e,t,i,a,o,n){const s=(0,r.up)("el-image"),d=(0,r.up)("el-col"),l=(0,r.up)("el-popover"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",kt,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{span:14},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{src:n.coverURL,class:"image",onClick:n.handleClick},null,8,["src","onClick"])])),_:1}),(0,r.Wm)(d,{span:10},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{placement:"bottom",offset:-56,title:"",width:360,trigger:"hover",content:i.video.Name,"show-arrow":!1,"popper-style":"background-color: #21252b; border: 0px; color: white"},{reference:(0,r.w5)((()=>[(0,r._)("div",{class:"title",ref:"title"},(0,w.zw)(i.video.Name),513)])),_:1},8,["content"]),(0,r._)("div",It," 时长："+(0,w.zw)(n.formatDuration.hour)+":"+(0,w.zw)(n.formatDuration.minute)+":"+(0,w.zw)(n.formatDuration.second),1),(0,r._)("div",Ct," 尺寸："+(0,w.zw)(i.video.Width)+"×"+(0,w.zw)(i.video.Height),1),(0,r._)("div",_t," 大小："+(0,w.zw)(n.formatSize),1),(0,r._)("div",xt," 码率："+(0,w.zw)(n.formatBitRate),1),(0,r._)("div",Pt," 帧率："+(0,w.zw)(i.video.FrameRate),1),(0,r._)("div",zt," 类型："+(0,w.zw)(i.video.VideoSuffix.substring(1).toUpperCase()),1),(0,r._)("div",Tt," 编码："+(0,w.zw)(i.video.CodeType),1),(0,r._)("div",Wt," 位置："+(0,w.zw)(i.video.Location),1),(0,r._)("div",Mt," 修改时间："+(0,w.zw)(n.formatTime),1)])),_:1})])),_:1})])}var Vt={name:"VideoCard",props:{video:{default:()=>({BitRate:0,CodeType:"undefined",Duration:0,FrameRate:0,Height:0,ID:"",LastViewTime:0,Location:"",Name:"undefined",Size:0,UpdateTime:0,VideoSuffix:"undefined",Width:0})}},data(){return{}},mounted(){},methods:{handleClick(){this.$router.push("/video/"+this.video.ID)}},computed:{coverURL(){if(!this.video.ID||!this.video.ID.length)return"";let e=U.DS.encode(this.video.Name),t=U.DS.encode(this.video.Location);return`${x}/common/cover?name=${e}&location=${t}`},formatSize(){return W(this.video.Size)},formatDuration(){return T(this.video.Duration)},formatBitRate(){return M(this.video.BitRate)},formatTime(){let e="",t=new Date(this.video.UpdateTime),i=new Date(Date.now());return 0===this.video.UpdateTime?" - ":i.getTime()-this.video.UpdateTime<=6e4?"刚刚":(e=t.getDay()===i.getDay()?"今天 ":t.getDay()+1===i.getDay()?"昨天 ":t.toLocaleDateString()+" ",e+=t.toLocaleTimeString(),e.substring(0,e.length-3))}}};const Ut=(0,c.Z)(Vt,[["render",Et],["__scopeId","data-v-09ad7d8f"]]);var $t=Ut;const Rt={class:"background"},At={class:"top"},Bt={class:"player"},Nt={name:"VideoPage",data(){return{videoInfo:{BitRate:0,CodeType:"undefined",Duration:0,FrameRate:0,Height:0,ID:"",LastViewTime:0,Location:"",Name:"undefined",Size:0,UpdateTime:0,VideoSuffix:".mp4",Width:0}}},methods:{async getVideo(){try{let e=await Ce.video.get({id:this.id});if(e.data.code!==Pe)throw new Error(e.data.message);this.videoInfo=e.data.data}catch(e){Re.z8.error(e.message)}},handleReturn(){this.$router.push("/main")}},beforeMount(){this.getVideo()},mounted(){console.log("@@",this.videoType),V()},computed:{id(){return this.$route.params.id},videoURL(){return`${x}/video/stream?id=${this.id}`},videoType(){return`video/${this.videoInfo.VideoSuffix.substring(1)}`},coverURL(){return`${x}/cover?id=${this.id}`}}};var jt=Object.assign(Nt,{setup(e){return(e,t)=>{const i=(0,r.up)("el-icon"),a=(0,r.up)("vue3-video-play"),o=(0,r.up)("el-col"),n=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",Rt,[(0,r._)("div",At,(0,w.zw)(e.videoInfo.Name),1),(0,r._)("div",{class:"return_btn",onClick:t[0]||(t[0]=(...t)=>e.handleReturn&&e.handleReturn(...t))},[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)(y.BAP))])),_:1})]),(0,r._)("div",Bt,[(0,r.Wm)(a,{width:"1280px",height:"800px",title:e.videoInfo.Name,src:e.videoURL,type:e.videoType,autoPlay:!1},null,8,["title","src","type"])]),(0,r.Wm)(n,{style:{"margin-top":"20px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,v.SU)($t),{video:e.videoInfo,style:{"margin-left":"20px"}},null,8,["video"])])),_:1})])),_:1})])}}});const Ot=(0,c.Z)(jt,[["__scopeId","data-v-400c64e4"]]);var Ft=Ot;const qt=(0,m.p7)({history:(0,m.r5)(),routes:[{name:"default",path:"/",redirect:"/main"},{name:"main",path:"/main",component:bt},{name:"video",path:"/video/:id",component:Ft}]});qt.beforeEach(((e,t,i)=>{"/noRoute"!==e.path&&i()}));var Gt=qt,Ht=i(65);const Zt={actionX(e,{data:t}){e.commit("mutateX",{data:t})}},Kt={mutateX(e,{data:t}){e.x=t}},Yt={x:{}},Xt={x(e){return e.x}},Jt={},Qt=(0,Ht.MT)({actions:Zt,mutations:Kt,state:Yt,getters:Xt,modules:Jt});var ei=Qt,ti=i(20);const ii=(0,s.ri)(f);ii.use(p.Z).use(Gt).use(ei).use(ti.ZP),ii.config.warnHandler=()=>null,ii.mount("#app"),console.log("@version: ","Medialpha-1.0")}},t={};function i(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,a,o,n){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],n=e[u][2];for(var r=!0,d=0;d<a.length;d++)(!1&n||s>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[d])}))?a.splice(d--,1):(r=!1,n<s&&(s=n));if(r){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,o,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,s=a[0],r=a[1],d=a[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(d)var u=d(i)}for(t&&t(a);l<s.length;l++)n=s[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(u)},a=self["webpackChunkmedialpha"]=self["webpackChunkmedialpha"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(3320)}));a=i.O(a)})();
//# sourceMappingURL=app.c33c6952.js.map